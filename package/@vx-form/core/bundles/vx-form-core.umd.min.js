!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("rxjs/operators"),require("moment"),require("@angular/common"),require("@angular/http"),require("@angular/common/http"),require("rxjs"),require("@angular/forms"),require("@angular/core")):"function"==typeof define&&define.amd?define("@vx-form/core",["exports","rxjs/operators","moment","@angular/common","@angular/http","@angular/common/http","rxjs","@angular/forms","@angular/core"],t):t((e["vx-form"]=e["vx-form"]||{},e["vx-form"].core={}),e.rxjs.operators,e.moment_,e.ng.common,e.ng.http,e.ng.common.http,e.rxjs,e.ng.forms,e.ng.core)}(this,function(e,p,t,o,r,n,l,u,s){"use strict";var i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)};function a(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}var f=function(){return(f=Object.assign||function(e){for(var t,o=1,r=arguments.length;o<r;o++)for(var n in t=arguments[o])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};function c(e,t){var o="function"==typeof Symbol&&e[Symbol.iterator];if(!o)return e;var r,n,i=o.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)s.push(r.value)}catch(a){n={error:a}}finally{try{r&&!r.done&&(o=i["return"])&&o.call(i)}finally{if(n)throw n.error}}return s}function d(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(c(arguments[t]));return e}function h(e){if(!e.key)return[];if(!e._keyPath||e._keyPath.key!==e.key){var t=-1===e.key.indexOf("[")?e.key:e.key.replace(/\[(\w+)\]/g,".$1");e._keyPath={key:e.key,path:-1!==t.indexOf(".")?t.split("."):[t]}}return e._keyPath.path.slice(0)}var m=["required","pattern","minLength","maxLength","min","max"];function y(e,t,o){for(var r=0;r<t.length-1;r++){var n=t[r];e[n]&&F(e[n])||(e[n]=/^\d+$/.test(t[r+1])?[]:{}),e=e[n]}e[t[t.length-1]]=k(o)}function g(e){var t,o,r=e.parent.model;try{for(var n=function a(e){var t="function"==typeof Symbol&&e[Symbol.iterator],o=0;return t?t.call(e):{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}}}(h(e)),i=n.next();!i.done;i=n.next()){var s=i.value;if(!r)return r;r=r[s]}}catch(p){t={error:p}}finally{try{i&&!i.done&&(o=n["return"])&&o.call(n)}finally{if(t)throw t.error}}return r}function v(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return e.forEach(function(e){for(var t in e)b(n[t])||""===n[t]?n[t]=k(e[t]):(o=n[t],r=e[t],F(o)&&F(r)&&Object.getPrototypeOf(o)===Object.getPrototypeOf(r)&&!Array.isArray(o)&&!Array.isArray(r)&&v(n[t],e[t]));var o,r}),n}function b(e){return e===undefined||null===e}function C(e){return e===undefined}function O(e){return"function"==typeof e}function F(e){return null!=e&&"object"==typeof e}function k(r){if(!F(r)||l.isObservable(r)||r.changingThisBreaksApplicationSecurity||-1!==["RegExp","FileList","File","Blob"].indexOf(r.constructor.name))return r;if(r._isAMomentObject&&O(r.clone))return r.clone();if(r instanceof u.AbstractControl)return null;if(r instanceof Date)return new Date(r.getTime());if(Array.isArray(r))return r.slice(0).map(function(e){return k(e)});var e=Object.getPrototypeOf(r),t=Object.create(e);return t=Object.setPrototypeOf(t,e),Object.keys(r).reduce(function(e,t){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?Object.defineProperty(e,t,o):e[t]=k(r[t]),e},t)}function P(e,t,o){Object.defineProperty(e,t,{enumerable:!1,writable:!0,configurable:!0}),e[t]=o}function x(o,r,n){P(o,"___$"+r,o[r]),n({currentValue:o[r],firstChange:!0}),Object.defineProperty(o,r,{configurable:!0,get:function(){return o["___$"+r]},set:function(e){if(e!==o["___$"+r]){var t=o["___$"+r];o["___$"+r]=e,n({previousValue:t,currentValue:e,firstChange:!1})}}})}var E=new s.InjectionToken("VXFORM_CONFIG"),w=function(){function e(){this.types={},this.validators={},this.wrappers={},this.messages={},this.templateManipulators={preWrapper:[],postWrapper:[]},this.extras={checkExpressionOn:"changeDetectionCheck",showError:function(e){return e.formControl&&e.formControl.invalid&&(e.formControl.touched||e.options.parentForm&&e.options.parentForm.submitted||e.field.validation&&e.field.validation.show)}},this.extensions={}}return e.prototype.addConfig=function(e){var t=this;e.types&&e.types.forEach(function(e){return t.setType(e)}),e.validators&&e.validators.forEach(function(e){return t.setValidator(e)}),e.wrappers&&e.wrappers.forEach(function(e){return t.setWrapper(e)}),e.manipulators&&e.manipulators.forEach(function(e){return t.setManipulator(e)}),e.validationMessages&&e.validationMessages.forEach(function(e){return t.addValidatorMessage(e.name,e.message)}),e.extensions&&e.extensions.forEach(function(e){return t.extensions[e.name]=e.extension}),e.extras&&(this.extras=f({},this.extras,e.extras))},e.prototype.setType=function(t){var o=this;Array.isArray(t)?t.forEach(function(e){return o.setType(e)}):(this.types[t.name]||(this.types[t.name]={name:t.name}),["component","extends","defaultOptions"].forEach(function(e){t.hasOwnProperty(e)&&(o.types[t.name][e]=t[e])}),t.wrappers&&t.wrappers.forEach(function(e){return o.setTypeWrapper(t.name,e)}))},e.prototype.getType=function(e){return this.types[e],this.mergeExtendedType(e),this.types[e]},e.prototype.getMergedField=function(o){var r=this;void 0===o&&(o={});var e=this.getType(o.type);e.defaultOptions&&v(o,e.defaultOptions);var t=e["extends"]&&this.getType(e["extends"]).defaultOptions;t&&v(o,t),o&&o.optionsTypes&&o.optionsTypes.forEach(function(e){var t=r.getType(e).defaultOptions;t&&v(o,t)});var n=this.createComponent(o);n&&n.instance&&n.instance.defaultOptions&&v(o,n.instance.defaultOptions),!o.wrappers&&e.wrappers&&(o.wrappers=d(e.wrappers))},e.prototype.createComponent=function(e,t,o){if(void 0===e&&(e={}),e.type){var r=e._componentFactory;if(r&&e.type===r.type&&r.componentRef&&r.componentRef.hostView&&!r.componentRef.hostView.destroyed)return e._componentFactory.componentRef;var n=this.getType(e.type);return t||(t=e.parent.options._componentFactoryResolver),o||(o=this.getFieldInjector(e)),P(e,"_componentFactory",{type:e.type,component:n.component,componentRef:t?t.resolveComponentFactory(n.component).create(o):null}),e._componentFactory.componentRef}},e.prototype.setWrapper=function(t){var o=this;(this.wrappers[t.name]=t).types&&t.types.forEach(function(e){o.setTypeWrapper(e,t.name)})},e.prototype.getWrapper=function(e){return this.wrappers[e],this.wrappers[e]},e.prototype.setTypeWrapper=function(e,t){this.types[e]||(this.types[e]={}),this.types[e].wrappers||(this.types[e].wrappers=[]),-1===this.types[e].wrappers.indexOf(t)&&this.types[e].wrappers.push(t)},e.prototype.setValidator=function(e){this.validators[e.name]=e},e.prototype.getValidator=function(e){return this.validators[e],this.validators[e]},e.prototype.addValidatorMessage=function(e,t){this.messages[e]=t},e.prototype.getValidatorMessage=function(e){return this.messages[e]},e.prototype.setManipulator=function(e){(new e["class"])[e.method](this)},e.prototype.setAPPConfig=function(e){this.appConfig=e},e.prototype.mergeExtendedType=function(e){if(this.types[e]["extends"]){var t=this.getType(this.types[e]["extends"]);this.types[e].component||(this.types[e].component=t.component),this.types[e].wrappers||(this.types[e].wrappers=t.wrappers)}},e.prototype.getFieldInjector=function(e){void 0===e&&(e={});var t=e.parent;return t._componentFactory&&t._componentFactory.componentRef?t._componentFactory.componentRef.injector:t.options._injector},e.decorators=[{type:s.Injectable,args:[{providedIn:"root"}]}],e.ngInjectableDef=s.ɵɵdefineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}(),_=function(){function e(e,t,o){this.vxFormConfig=e,this.componentFactoryResolver=t,this.injector=o}return e.prototype.buildForm=function(e,t,o,r){void 0===t&&(t=[]),this.vxFormConfig.extensions.core,this._buildForm({fieldGroup:t,model:o,formControl:e,options:this._setOptions(r)})},e.prototype._buildForm=function(t){var o=this;this.getExtensions().forEach(function(e){return e.prePopulate&&e.prePopulate(t)}),this.getExtensions().forEach(function(e){return e.onPopulate&&e.onPopulate(t)}),t.fieldGroup&&t.fieldGroup.forEach(function(e){return o._buildForm(e)}),this.getExtensions().forEach(function(e){return e.postPopulate&&e.postPopulate(t)})},e.prototype.getExtensions=function(){var t=this;return Object.keys(this.vxFormConfig.extensions).map(function(e){return t.vxFormConfig.extensions[e]})},e.prototype._setOptions=function(t){return(t=t||{}).formState=t.formState||{},t.showError||(t.showError=this.vxFormConfig.extras.showError),t.fieldChanges||P(t,"fieldChanges",new l.Subject),t._componentFactoryResolver||P(t,"_componentFactoryResolver",this.componentFactoryResolver),t._injector||P(t,"_injector",this.injector),t._hiddenFieldsForCheck||(t._hiddenFieldsForCheck=[]),t._markForCheck||(t._markForCheck=function(e){e._componentRefs&&e._componentRefs.forEach(function(e){return e.changeDetectorRef.markForCheck()}),e.fieldGroup&&e.fieldGroup.forEach(function(e){return t._markForCheck(e)})}),t},e.decorators=[{type:s.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:w},{type:s.ComponentFactoryResolver},{type:s.Injector}]},e.ngInjectableDef=s.ɵɵdefineInjectable({factory:function(){return new e(s.ɵɵinject(w),s.ɵɵinject(s.ComponentFactoryResolver),s.ɵɵinject(s.INJECTOR))},token:e,providedIn:"root"}),e}(),j=t,V=function(){function e(){this.base64EncodeChars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-*/!",this.base64DecodeChars=new Array(-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1)}return e.prototype.baseEncode=function(e){var t,o,r,n,i,s;for(r=e.length,o=0,t="";o<r;){if(n=255&e.charCodeAt(o++),o==r){t+=this.base64EncodeChars.charAt(n>>2),t+=this.base64EncodeChars.charAt((3&n)<<4),t+="==";break}if(i=e.charCodeAt(o++),o==r){t+=this.base64EncodeChars.charAt(n>>2),t+=this.base64EncodeChars.charAt((3&n)<<4|(240&i)>>4),t+=this.base64EncodeChars.charAt((15&i)<<2),t+="=";break}s=e.charCodeAt(o++),t+=this.base64EncodeChars.charAt(n>>2),t+=this.base64EncodeChars.charAt((3&n)<<4|(240&i)>>4),t+=this.base64EncodeChars.charAt((15&i)<<2|(192&s)>>6),t+=this.base64EncodeChars.charAt(63&s)}return t},e.prototype.baseDecode=function(e){var t,o,r,n,i,s,a;for(s=e.length,i=0,a="";i<s;){for(;t=this.base64DecodeChars[255&e.charCodeAt(i++)],i<s&&-1==t;);if(-1==t)break;for(;o=this.base64DecodeChars[255&e.charCodeAt(i++)],i<s&&-1==o;);if(-1==o)break;a+=String.fromCharCode(t<<2|(48&o)>>4);do{if(61==(r=255&e.charCodeAt(i++)))return a;r=this.base64DecodeChars[r]}while(i<s&&-1==r);if(-1==r)break;a+=String.fromCharCode((15&o)<<4|(60&r)>>2);do{if(61==(n=255&e.charCodeAt(i++)))return a;n=this.base64DecodeChars[n]}while(i<s&&-1==n);if(-1==n)break;a+=String.fromCharCode((3&r)<<6|n)}return a},e.prototype.t1=function(e){var t=!1;try{if((e=this.baseDecode(e))!=undefined&&null!=e&&""!=e){var o=e.split(";");if(null!=o&&2==o.length){var r=o[0],n=o[1];if(r.length==parseInt(n)){var i=j().toDate(),s=j(r).toDate();console.log("[][][]"),console.log(j(s).diff(i,"day")),0<j(s).diff(i,"day")&&(t=!0)}}}}catch(a){}return t},e.decorators=[{type:s.Injectable,args:[{providedIn:"root"}]}],e.ngInjectableDef=s.ɵɵdefineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}(),A=function(){function e(e,t,o,r,n){var i=this;this.vxFormBuilder=e,this.vxFormConfig=t,this.test=o,this.parentFormGroup=n,this.modelChange=new s.EventEmitter,this.status=0,this.immutable=!1,this.modelChangeSubs=[],this.gogo=!0,this.enableCheckExprDebounce=!1,this.checkExpressionChange$=this.modelChange.pipe(p.debounceTime(this.enableCheckExprDebounce?100:0)).subscribe(function(){i.enableCheckExprDebounce=!0,i.checkExpressionChange(),i.enableCheckExprDebounce=!1}),this.immutable=null!==r||!!t.extras.immutable}return Object.defineProperty(e.prototype,"model",{get:function(){return this._model||{}},set:function(e){this._model=this.immutable?k(e):e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fields",{get:function(){return this._fields||[]},set:function(e){this._fields=this.immutable?k(e):e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this._options},set:function(e){this._options=this.immutable?k(e):e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"content",{set:function(e){e&&e.nativeElement.nextSibling},enumerable:!0,configurable:!0}),e.prototype.ngDoCheck=function(){"changeDetectionCheck"===this.vxFormConfig.extras.checkExpressionOn&&this.checkExpressionChange()},e.prototype.ngOnChanges=function(e){(e.fields||e.form||e.model)&&(this.form=this.form||new u.FormGroup({}),this.setOptions(),this.clearModelSubscriptions(),this.vxFormBuilder.buildForm(this.form,this.fields,this.model,this.options),this.trackModelChanges(this.fields),this.options.updateInitialValue())},e.prototype.ngOnDestroy=function(){this.clearModelSubscriptions(),this.checkExpressionChange$.unsubscribe()},e.prototype.changeModel=function(e){y(this.model,e.key.split("."),e.value),this.modelChange.emit(k(this.model))},e.prototype.setOptions=function(){var t=this;this.options||(this.options={}),this.options.resetModel||(this.options.resetModel=function(e){e=k(b(e)?t.initialModel:e),t.model&&(Object.keys(t.model).forEach(function(e){return delete t.model[e]}),Object.assign(t.model,e||{})),t.options._buildForm(),t.options.parentForm&&t.options.parentForm.control===t.form?t.options.parentForm.resetForm(e):t.form.reset(e)}),!this.options.parentForm&&this.parentFormGroup&&(P(this.options,"parentForm",this.parentFormGroup),x(this.options.parentForm,"submitted",function(e){e.firstChange||t.options._markForCheck({fieldGroup:t.fields,model:t.model,formControl:t.form,options:t.options})})),this.options.updateInitialValue||(this.options.updateInitialValue=function(){return t.initialModel=k(t.model)}),this.options._buildForm||(this.options._buildForm=function(e){void 0===e&&(e=!1),t.clearModelSubscriptions(),t.vxFormBuilder.buildForm(t.form,t.fields,t.model,t.options),t.trackModelChanges(t.fields),e&&t.modelChange.emit(k(t.model))})},e.prototype.checkExpressionChange=function(){this.options&&this.options._checkField&&this.options._checkField({fieldGroup:this.fields,model:this.model,formControl:this.form,options:this.options})},e.prototype.trackModelChanges=function(e,s){var a=this;void 0===s&&(s=[]),e.forEach(function(e){if(e.status=a.status,e.key&&!e.fieldGroup){var o=e.formControl,t=o.valueChanges,r=e.modelOptions,n=r.updateOn,i=r.debounce;(!n||"change"===n)&&i&&0<i["default"]&&(t=o.valueChanges.pipe(p.debounceTime(i["default"]))),a.modelChangeSubs.push(t.subscribe(function(t){1<o._onChange.length&&o.patchValue(t,{emitEvent:!1}),e.parsers&&0<e.parsers.length&&e.parsers.forEach(function(e){return t=e(t)}),a.changeModel({key:d(s,h(e)).join("."),value:t})}))}e.fieldGroup&&0<e.fieldGroup.length&&a.trackModelChanges(e.fieldGroup,e.key?d(s,h(e)):s)})},e.prototype.clearModelSubscriptions=function(){this.modelChangeSubs.forEach(function(e){return e.unsubscribe()}),this.modelChangeSubs=[]},e.prototype.checkFieldShow=function(e){var t=!0;return e&&e.hasOwnProperty("show")&&(t=e.show),t},Object.defineProperty(e.prototype,"checkTest",{get:function(){return this.gogo},set:function(e){this.gogo=e},enumerable:!0,configurable:!0}),e.decorators=[{type:s.Component,args:[{selector:"vxform",template:'\n    <ng-container *ngIf="checkTest">\n    <ng-container *ngFor="let field of fields">\n      <vxform-field\n        *ngIf="checkFieldShow(field)"\n        hide-deprecation\n        [form]="field.form"\n        [options]="field.options"\n        [model]="field.model"\n        [field]="field"\n      >\n      </vxform-field>\n    </ng-container>\n    <ng-container #content>\n      <ng-content></ng-content>\n    </ng-container>\n    </ng-container>\n  ',host:{"[class]":"class"},providers:[_,V]}]}],e.ctorParameters=function(){return[{type:_},{type:w},{type:V},{type:undefined,decorators:[{type:s.Attribute,args:["immutable"]}]},{type:u.FormGroupDirective,decorators:[{type:s.Optional}]}]},e.propDecorators={form:[{type:s.Input}],model:[{type:s.Input}],fields:[{type:s.Input}],options:[{type:s.Input}],"class":[{type:s.Input}],modelChange:[{type:s.Output}],content:[{type:s.ViewChild,args:["content",{"static":!0}]}],status:[{type:s.Input}]},e}(),I=function(){function e(e,t,o,r){this.vxFormConfig=e,this.componentFactoryResolver=t,this.injector=o,this.className="",this.warnDeprecation=!1,this.modelChange=new s.EventEmitter,this.warnDeprecation=null===r}return Object.defineProperty(e.prototype,"model",{set:function(e){this.warnDeprecation&&console.warn(":"+this.constructor.name)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"form",{set:function(e){this.warnDeprecation&&console.warn(":"+this.constructor.name)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"options",{set:function(e){this.warnDeprecation&&console.warn(":"+this.constructor.name)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rownumber",{set:function(e){e!=undefined&&null!=e&&-1<e&&(this.field.rownumber=e)},enumerable:!0,configurable:!0}),e.prototype.ngAfterContentInit=function(){this.triggerHook("afterContentInit")},e.prototype.ngAfterContentChecked=function(){this.triggerHook("afterContentChecked")},e.prototype.ngAfterViewInit=function(){this.triggerHook("afterViewInit")},e.prototype.ngAfterViewChecked=function(){this.triggerHook("afterViewChecked")},e.prototype.ngDoCheck=function(){this.triggerHook("doCheck")},e.prototype.ngOnInit=function(){this.triggerHook("onInit")},e.prototype.ngOnChanges=function(e){this.triggerHook("onChanges",e)},e.prototype.ngOnDestroy=function(){this.field&&P(this.field,"_componentRefs",[]),this.triggerHook("onDestroy")},e.prototype.renderField=function(e,r,t){var n=this;if(this.containerRef===e&&(P(this.field,"_componentRefs",[]),this.containerRef.clear()),t&&0<t.length){var o=c(t),i=o[0],s=o.slice(1),a=this.vxFormConfig.getWrapper(i).component,p=r.options&&r.options._componentFactoryResolver?r.options._componentFactoryResolver:this.componentFactoryResolver,l=e.createComponent(p.resolveComponentFactory(a));this.attachComponentRef(l,r),x(l.instance,"fieldComponent",function(e){var t=e.currentValue,o=e.firstChange;t&&(n.renderField(t,r,s),!o&&l.changeDetectorRef.detectChanges())})}else{var u=this.vxFormConfig.createComponent(r,this.componentFactoryResolver,this.injector);u&&(this.attachComponentRef(u,r),e.insert(u.hostView))}},e.prototype.triggerHook=function(e,t){this.field.hooks&&this.field.hooks[e]&&(t&&!t.field||this.field.hooks[e](this.field)),this.field.lifecycle&&this.field.lifecycle[e]&&this.field.lifecycle[e](this.field.form,this.field,this.field.model,this.field.options),"onChanges"===e&&t.field&&this.renderField(this.containerRef,this.field,this.field.wrappers)},e.prototype.attachComponentRef=function(e,t){t._componentRefs.push(e),Object.assign(e.instance,{field:t})},e.decorators=[{type:s.Component,args:[{selector:"vxform-field",template:"\n    <ng-template #container></ng-template>\n  ",host:{"[style.display]":'field.hide ? "none":""',"[class]":"field.type=='text'?'panel-'+field.type+' panel-'+field.typeold: 'panel-'+field.type"}}]}],e.ctorParameters=function(){return[{type:w},{type:s.ComponentFactoryResolver},{type:s.Injector},{type:undefined,decorators:[{type:s.Attribute,args:["hide-deprecation"]}]}]},e.propDecorators={field:[{type:s.Input}],className:[{type:s.Input,args:["class"]}],model:[{type:s.Input}],form:[{type:s.Input}],options:[{type:s.Input}],rownumber:[{type:s.Input}],modelChange:[{type:s.Output}],containerRef:[{type:s.ViewChild,args:["container",{read:s.ViewContainerRef,"static":!0}]}]},e}(),G=function(){function e(e,t,o){this.renderer=e,this.elementRef=t,this.uiAttributesCache={},this.uiAttributes=d(m,["tabindex","placeholder","readonly","disabled","step"]),this.document=o}return Object.defineProperty(e.prototype,"to",{get:function(){return this.field.templateOptions||{}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fieldAttrElements",{get:function(){return this.field&&this.field._attrElements||[]},enumerable:!0,configurable:!0}),e.prototype.ngOnChanges=function(e){var r=this;e.field&&(["id","name"].forEach(function(e){r.field[e]&&r.setAttribute(e,r.field[e])}),this.to&&this.to.attributes&&x(this.to,"attributes",function(e){var t=e.currentValue,o=e.previousValue;o&&Object.keys(o).forEach(function(e){return r.removeAttribute(e)}),t&&Object.keys(t).forEach(function(e){return r.setAttribute(e,t[e])})}),this.attachAttrElement(),1===this.fieldAttrElements.length&&x(this.field,"focus",function(e){var t=e.currentValue,o=r.fieldAttrElements?r.fieldAttrElements[0]:null;o&&r.focusElement(o,t)}))},e.prototype.ngDoCheck=function(){var o=this;this.uiAttributes.forEach(function(e){var t=o.to[e];o.uiAttributesCache[e]!==t&&((o.uiAttributesCache[e]=t)||0===t?o.setAttribute(e,!0===t?e:""+t):o.removeAttribute(e))})},e.prototype.ngOnDestroy=function(){this.detachAttrElement()},e.prototype.focusElement=function(e,t){var o=this;if(e.focus){var r=!!this.document.activeElement&&this.fieldAttrElements.some(function(e){return o.document.activeElement===e||e.contains(o.document.activeElement)});t&&!r?e.focus():!t&&r&&e.blur()}},e.prototype.onFocus=function(e){this.field.___$focus=!0,this.to.focus&&this.to.focus(this.field,e)},e.prototype.onBlur=function(e){this.field.___$focus=!1,this.to.blur&&this.to.blur(this.field,e)},e.prototype.onChange=function(e){this.to.change&&this.to.change(this.field,e),this.field.formControl&&this.field.formControl.markAsDirty()},e.prototype.attachAttrElement=function(){this.field._attrElements?this.field._attrElements.push(this.elementRef.nativeElement):P(this.field,"_attrElements",[this.elementRef.nativeElement])},e.prototype.detachAttrElement=function(){var t=this,e=this.fieldAttrElements.findIndex(function(e){return e!==t.elementRef.nativeElement});-1!==e&&this.field._attrElements.splice(e,1)},e.prototype.setAttribute=function(e,t){this.renderer.setAttribute(this.elementRef.nativeElement,e,t)},e.prototype.removeAttribute=function(e){this.renderer.removeAttribute(this.elementRef.nativeElement,e)},e.decorators=[{type:s.Directive,args:[{selector:"[vxFormAttributes]",host:{"(focus)":"onFocus($event)","(blur)":"onBlur($event)","(keyup)":"to.keyup && to.keyup(field, $event)","(keydown)":"to.keydown && to.keydown(field, $event)","(click)":"to.click && to.click(field, $event)","(change)":"onChange($event)","(keypress)":"to.keypress && to.keypress(field, $event)"}}]}],e.ctorParameters=function(){return[{type:s.Renderer2},{type:s.ElementRef},{type:undefined,decorators:[{type:s.Inject,args:[o.DOCUMENT]}]}]},e.propDecorators={field:[{type:s.Input,args:["vxFormAttributes"]}]},e}(),R=function(){function e(){}return Object.defineProperty(e.prototype,"model",{get:function(){return this.field.model},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"form",{get:function(){return this.field.parent.formControl},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this.field.options},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this.field.key},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"formControl",{get:function(){return this.field.formControl},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"to",{get:function(){return this.field.templateOptions||{}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showError",{get:function(){return this.options.showError(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this.field.id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"formState",{get:function(){return this.options.formState||{}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"formStatus",{get:function(){return this.field.status||0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"editor",{get:function(){return!this.field.hasOwnProperty("editor")||this.field.editor},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this.model.hasOwnProperty(this.field.key)?this.model[this.field.key]:""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"placeHolder",{get:function(){return this.to!=undefined&&null!=this.to&&this.to.placeholder!=undefined&&null!=this.to.placeholder?this.to.placeholder:""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textSingle",{get:function(){var t="";if(this.model.hasOwnProperty(this.field.key)){var o=this.model[this.field.key];null!=o&&""!=o&&this.field.templateOptions&&this.field.templateOptions.options&&null!=this.field.templateOptions.options&&this.field.templateOptions.options.forEach(function(e){e.value==o&&(t=e.label)})}return t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textMultiple",{get:function(){var e=this,o=[];if(this.model.hasOwnProperty(this.field.key)){var t=this.model[this.field.key];null!=t&&t instanceof Array&&this.field.templateOptions&&this.field.templateOptions.options&&null!=this.field.templateOptions.options&&t.forEach(function(t){e.to.options.forEach(function(e){e.value===t&&o.push(e.label)})})}return o.join("、")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textLookUp",{get:function(){var e=[];return this.model.hasOwnProperty(this.key)&&this.model[this.key]!=undefined&&null!=this.model[this.key]&&(e=this.model[this.key].map(function(e){return e.label})),e.join("、")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tips",{get:function(){return this.to!=undefined&&null!=this.to&&this.to.tips!=undefined&&null!=this.to.tips?this.to.tips:""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"attachment",{get:function(){var e=[];return this.model.hasOwnProperty(this.field.key)&&null!=this.model[this.field.key]&&this.model[this.field.key]&&(e=this.model[this.field.key]),e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"attachmentDisabled",{get:function(){var e=!1;if(this.to.hasOwnProperty("attachment")&&this.to.attachment.hasOwnProperty("limit")){var t=this.to.attachment.limit;if(null!=t)null!=this.attachment&&(e=this.attachment.length>=t)}return e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"active",{get:function(){var e=!1;return this.field.active!=undefined&&null!=this.field.active&&1==this.field.active&&(e=!0),e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rownumber",{get:function(){var e=0;return this.field.active!=undefined&&null!=this.field.active&&(e=this.field.rownumber),e},enumerable:!0,configurable:!0}),e.propDecorators={field:[{type:s.Input}],model:[{type:s.Input}],form:[{type:s.Input}],options:[{type:s.Input}]},e}(),D=function(e){function t(){return e.call(this)||this}return a(t,e),t}(R);function M(t){var e=t.formControl.parent;if(e instanceof u.FormArray)-1!==(r=e.controls.findIndex(function(e){return e===t.formControl}))&&(e.removeAt(r),t.formControl.setParent(null));else if(e instanceof u.FormGroup){var o=h(t),r=o[o.length-1];e.get([r])===t.formControl&&e.removeControl(r),t.formControl.setParent(null)}}function S(r,e){e=e||r.formControl,!r.formControl&&e&&(P(r,"formControl",e),r.templateOptions.disabled=!!r.templateOptions.disabled,x(r.templateOptions,"disabled",function(e){var t=e.firstChange,o=e.currentValue;t||(o?r.formControl.disable():r.formControl.enable())}),e.registerOnDisabledChange&&e.registerOnDisabledChange(function(e){return r.templateOptions.___$disabled=e}));var t=r.parent.formControl;if(t){for(var o=h(r),n=0;n<o.length-1;n++){var i=o[n];t.get([i])||S({key:i,formControl:new u.FormGroup({}),parent:{formControl:t}}),t=t.get([i])}var s=g(r);b(e.value)&&b(s)||e.value===s||!(e instanceof u.FormControl)||e.patchValue(s);var a=o[o.length-1];t.get([a])!==e&&t.setControl(a,e)}}var T=function(o){function e(e){var t=o.call(this)||this;return t.defaultOptions={defaultValue:[]},t}return a(e,o),e.prototype.onPopulate=function(e){e.formControl||S(e,new u.FormArray([],{updateOn:e.modelOptions.updateOn})),e.fieldGroup=e.fieldGroup||[];var t=e.model?e.model.length:0;if(e.fieldGroup.length>t)for(var o=e.fieldGroup.length-1;t<=o;--o)M(e.fieldGroup[o]),e.fieldGroup.splice(o,1);for(o=e.fieldGroup.length;o<t;o++){var r=f({},k(e.fieldArray),{key:""+o});e.fieldGroup.push(r)}},e.prototype.add=function(e,t){e=b(e)?this.field.fieldGroup.length:e,this.model||y(this.field.parent.model,h(this.field),[]),this.model.splice(e,0,t?k(t):undefined),this.options._buildForm(!0),this.formControl.markAsDirty()},e.prototype.remove=function(e){this.model.splice(e,1),M(this.field.fieldGroup[e]),this.field.fieldGroup.splice(e,1),this.field.fieldGroup.forEach(function(e,t){return e.key=""+t}),this.options._buildForm(!0),this.formControl.markAsDirty()},e.ctorParameters=function(){return[{type:_,decorators:[{type:s.Inject,args:[E]},{type:s.Optional}]}]},e}(R),N=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.propDecorators={fieldComponent:[{type:s.ViewChild,args:["fieldComponent",{read:s.ViewContainerRef,"static":!1}]}]},t}(R),$=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.defaultOptions={defaultValue:{}},e}return a(e,t),e.decorators=[{type:s.Component,args:[{selector:"vxform-group",template:'\n    <vxform-field *ngFor="let f of field.fieldGroup" [field]="f"></vxform-field>\n    <ng-content></ng-content>\n  ',host:{"[class]":'field.fieldGroupClassName || ""'}}]}],e}(R),q=function(){function e(e){this.vxFormConfig=e}return Object.defineProperty(e.prototype,"errorMessage",{get:function(){var e=this.field.formControl;for(var t in e.errors)if(e.errors.hasOwnProperty(t)){var o=this.vxFormConfig.getValidatorMessage(t);if(F(e.errors[t])){if(e.errors[t].errorPath)return;e.errors[t].message&&(o=e.errors[t].message)}return this.field.validation&&this.field.validation.messages&&this.field.validation.messages[t]&&(o=this.field.validation.messages[t]),this.field.validators&&this.field.validators[t]&&this.field.validators[t].message&&(o=this.field.validators[t].message),this.field.asyncValidators&&this.field.asyncValidators[t]&&this.field.asyncValidators[t].message&&(o=this.field.asyncValidators[t].message),"function"==typeof o?o(e.errors[t],this.field):o}},enumerable:!0,configurable:!0}),e.decorators=[{type:s.Component,args:[{selector:"vxform-validation-message",template:"\n    {{ errorMessage }}\n  "}]}],e.ctorParameters=function(){return[{type:w}]},e.propDecorators={field:[{type:s.Input}]},e}(),W=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.decorators=[{type:s.Component,args:[{selector:"template",template:'\n    <div [innerHtml]="field.template"></div>\n  '}]}],t}(R);function H(e,t,o){return e instanceof Function?e.apply(t,o):!!e}var L=function(){function e(){}return e.prototype.prePopulate=function(e){var o=this;e.parent||e.options._checkField||(e.options._checkField=function(e,t){return o._checkField(e,t)})},e.prototype.onPopulate=function(s){if(s.parent&&!s._expressionProperties){if(P(s,"_expressionProperties",{}),s.expressionProperties){var e=function(e){var t=s.expressionProperties[e],o=function i(e,t){try{return Function.apply(void 0,d(t,[e+" = expressionValue;"]))}catch(o){console.error(o)}}("field."+e,["expressionValue","model","field"]);if("string"==typeof t||O(t))s._expressionProperties[e]={expression:a._evalExpression(t,s.parent.expressionProperties&&s.parent.expressionProperties.hasOwnProperty("templateOptions.disabled")?function(){return s.parent.templateOptions.disabled}:undefined),expressionValueSetter:o},"templateOptions.disabled"===e&&Object.defineProperty(s._expressionProperties[e],"expressionValue",{get:function(){return s.templateOptions.disabled},set:function(){},enumerable:!0,configurable:!0});else if(t instanceof l.Observable){var r=t.subscribe(function(e){return H(o,{field:s},[e,s.model,s])}),n=s.hooks.onDestroy;s.hooks.onDestroy=function(e){n&&n(e),r.unsubscribe()}}},a=this;for(var t in s.expressionProperties)e(t)}if(s.hideExpression){delete s.hide;for(var o=s.parent;o&&!o.hideExpression;)o=o.parent;s.hideExpression=this._evalExpression(s.hideExpression,o&&o.hideExpression?function(){return o.hide}:undefined)}else x(s,"hide",function(e){var t=e.currentValue,o=e.firstChange;(!o||o&&!0===t)&&s.options._hiddenFieldsForCheck.push(s)})}},e.prototype.postPopulate=function(e){e.parent||e.options._checkField(e,!0)},e.prototype._evalExpression=function(r,n){return"string"==typeof(r=r||function(){return!1})&&(r=function i(e,t){try{return e.indexOf("this.field"),Function.apply(void 0,d(t,["return "+e+";"]))}catch(o){console.error(o)}}(r,["model","formState","field"])),n?function(e,t,o){return n()||r(e,t,o)}:r},e.prototype._checkField=function(e,t){var o=this;void 0===t&&(t=!1);var r=e.options,n=!1;e.fieldGroup.forEach(function(e){o.checkFieldExpressionChange(e,t)&&(n=!0),o.checkFieldVisibilityChange(e,t)&&(r._hiddenFieldsForCheck.push(e),n=!0),e.fieldGroup&&0<e.fieldGroup.length&&o._checkField(e,t)}),n&&e.options&&e.options._markForCheck&&e.options._markForCheck(e),e.parent||(r._hiddenFieldsForCheck.sort(function(e){return e.hide?-1:1}).forEach(function(e){return o.toggleFormControl(e,e.hide)}),r._hiddenFieldsForCheck=[])},e.prototype.checkFieldExpressionChange=function(e,t){if(!e||!e._expressionProperties)return!1;var o=!1,r=e._expressionProperties;for(var n in r){var i=H(r[n].expression,{field:e},[e.model,e.options.formState,e]);if("templateOptions.disabled"===n&&(i=!!i),(t||r[n].expressionValue!==i&&(!F(i)||JSON.stringify(i)!==JSON.stringify(r[n].expressionValue)))&&(o=!0,r[n].expressionValue=i,H(r[n].expressionValueSetter,{field:e},[i,e.model,e]),"templateOptions.disabled"===n&&e.key&&this.setDisabledState(e,i),0===n.indexOf("model."))){var s=n.replace(/^model\./,""),a=e.key&&n===s?e.formControl:e.parent.formControl.get(s);!a||b(a.value)&&b(i)||a.value===i||a.patchValue(i)}}return o},e.prototype.checkFieldVisibilityChange=function(e,t){if(!e||b(e.hideExpression))return!1;var o=!!H(e.hideExpression,{field:e},[e.model,e.options.formState,e]),r=!1;return(o!==e.hide||t)&&(r=!0,e.hide=o,e.templateOptions.hidden=o),r},e.prototype.setDisabledState=function(e,t){var o=this;e.fieldGroup&&e.fieldGroup.filter(function(e){return!e.expressionProperties||!e.expressionProperties.hasOwnProperty("templateOptions.disabled")}).forEach(function(e){return o.setDisabledState(e,t)}),e.key&&e.templateOptions.disabled!==t&&(e.templateOptions.disabled=t)},e.prototype.toggleFormControl=function(e,t){var o=this;e.fieldGroup&&e.fieldGroup.filter(function(e){return!e.hideExpression}).forEach(function(e){return o.toggleFormControl(e,t)}),e.formControl&&e.key&&(!0===t?M(e):S(e)),e.options.fieldChanges&&e.options.fieldChanges.next({field:e,type:"hidden",value:t})},e}(),X=function(){function e(e){this.vxFormConfig=e}return e.prototype.onPopulate=function(e){e.parent&&e.key&&(this.initFieldValidation(e,"validators"),this.initFieldValidation(e,"asyncValidators"))},e.prototype.initFieldValidation=function(t,e){var o=this;if(C(t["_"+e])){var r="validators"===e?[this.getPredefinedFieldValidation(t)]:[];if(t[e])for(var n in t[e])"validation"!==n||Array.isArray(t[e].validation)||(t[e].validation=[t[e].validation]),"validation"===n?r.push.apply(r,d(t[e].validation.map(function(e){return o.wrapNgValidatorFn(t,e)}))):r.push(this.wrapNgValidatorFn(t,t[e][n],n));P(t,"_"+e,"validators"===e?u.Validators.compose(r):u.Validators.composeAsync(r))}else if(t.formControl){var i="validators"===e?t.formControl.validator:t.formControl.asyncValidator;t["_"+e]!==i&&(t["_"+e]=i)}},e.prototype.getPredefinedFieldValidation=function(n){var i=[];return m.forEach(function(r){return x(n.templateOptions,r,function(e){var t=e.currentValue,o=e.firstChange;i=i.filter(function(e){return e!==r}),null!=t&&!1!==t&&i.push(r),!o&&n.formControl&&n.formControl.updateValueAndValidity({emitEvent:!1})})}),function(o){return 0===i.length?null:u.Validators.compose(i.map(function(t){return function(){var e=n.templateOptions[t];switch(t){case"required":return u.Validators.required(o);case"pattern":return u.Validators.pattern(e)(o);case"minLength":return u.Validators.minLength(e)(o);case"maxLength":return u.Validators.maxLength(e)(o);case"min":return u.Validators.min(e)(o);case"max":return u.Validators.max(e)(o)}}}))(o)}},e.prototype.wrapNgValidatorFn=function(n,i,s){var a=this;return function(e){var t=i;"string"==typeof i&&(t=a.vxFormConfig.getValidator(i).validation),F(i)&&(t=i.expression);var o=t(e,n);return s?function r(e){return!!e&&"function"==typeof e.then}(o)?o.then(function(e){return n.options&&n.options._markForCheck&&n.options._markForCheck(n),a.handleResult(n,e,{validatorName:s,validator:i})}):a.handleResult(n,o,{validatorName:s,validator:i}):o}},e.prototype.handleResult=function(e,t,o){var r,n,i,s=o.validatorName,a=o.validator;if(F(a)&&e.formControl&&a.errorPath){var p=e.formControl.get(a.errorPath);if(p){var l=p.errors||{};t?(delete l[s],p.setErrors(0===Object.keys(l).length?null:l)):p.setErrors(f({},l,((r={})[s]={message:a.message},r)))}return t?null:((n={})[s]={errorPath:a.errorPath},n)}return t?null:((i={})[s]=!0,i)},e}(),B=function(){function e(){}return e.prototype.onPopulate=function(e){e.key&&this.addFormControl(e),e.parent&&e.fieldGroup&&!e.key&&P(e,"formControl",e.parent.formControl)},e.prototype.postPopulate=function(e){e.parent||this.setValidators(e)&&e.formControl._updateTreeValidity({emitEvent:!1})},e.prototype.addFormControl=function(e){var t,o={updateOn:e.modelOptions.updateOn},r=e.parent.formControl,n=g(e),i=h(e);if(e.formControl instanceof u.AbstractControl||r&&r.get(i))t=e.formControl||r.get(i);else if(e._componentFactory&&e._componentFactory.component&&e._componentFactory.component.createControl){t=e._componentFactory.component.createControl(n,e)}else t=e.fieldGroup?new u.FormGroup({},o):new u.FormControl(n,o);S(e,t)},e.prototype.setValidators=function(e){var t=this,o=!1;if(e.key){var r=e._validators,n=e._asyncValidators,i=e.formControl;e.templateOptions.disabled&&i.enabled&&(i.disable({emitEvent:!1,onlySelf:!0}),o=!0),r!==i.validator&&(i.setValidators(r),o=!0),n!==i.asyncValidator&&(i.setAsyncValidators(n),o=!0)}return(e.fieldGroup||[]).forEach(function(e){return t.setValidators(e)&&(o=!0)}),o},e}(),Y=function(){function o(e){this.value=o.EMPTY,e&&o.isGuid(e)&&(this.value=e)}return o.isGuid=function(e){var t=e.toString();return e&&(e instanceof o||o.validator.test(t))},o.create=function(){return new o([o.gen(2),o.gen(1),o.gen(1),o.gen(1),o.gen(3)].join("-"))},o.createEmpty=function(){return new o("emptyguid")},o.parse=function(e){return new o(e)},o.raw=function(){return[o.gen(2),o.gen(1),o.gen(1),o.gen(1),o.gen(3)].join("-")},o.gen=function(e){for(var t="",o=0;o<e;o++)t+=(65536*(1+Math.random())|0).toString(16).substring(1);return t},o.prototype.equals=function(e){return o.isGuid(e)&&this.value===e.toString()},o.prototype.isEmpty=function(){return this.value===o.EMPTY},o.prototype.toString=function(){return this.value},o.prototype.toJSON=function(){return{value:this.value}},o.validator=new RegExp("^[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$","i"),o.EMPTY="00000000-0000-0000-0000-000000000000",o}(),z=function(){function e(e){this.vxFormConfig=e,this.formId=0}return e.prototype.prePopulate=function(t){if(this.getFieldComponentInstance(t).prePopulate(),!t.parent){var e=t.options&&t.options.fieldTransform||this.vxFormConfig.extras.fieldTransform;(Array.isArray(e)?e:[e]).forEach(function(e){if(e)e(t.fieldGroup,t.model,t.formControl,t.options)})}},e.prototype.onPopulate=function(o){var r=this;this.initFieldOptions(o),this.getFieldComponentInstance(o).onPopulate(),o.fieldGroup&&o.fieldGroup.forEach(function(e,t){Object.defineProperty(e,"parent",{get:function(){return o},configurable:!0}),Object.defineProperty(e,"index",{get:function(){return t},configurable:!0}),r.formId++})},e.prototype.postPopulate=function(e){this.getFieldComponentInstance(e).postPopulate()},e.prototype.initFieldOptions=function(e){var t=e.parent;t&&(Object.defineProperty(e,"form",{get:function(){return t.formControl},configurable:!0}),Object.defineProperty(e,"options",{get:function(){return t.options},configurable:!0}),Object.defineProperty(e,"model",{get:function(){return e.key&&e.fieldGroup?g(e):t.model},configurable:!0}),v(e,{id:function n(e,t,o){if(t.id)return t.id;var r=t.type;return!r&&t.template&&(r="template"),[e,r,t.key,o].join("_")}("vxform_"+this.formId,e,e.index),guid:Y.create().value,hooks:{},modelOptions:{},templateOptions:e.type&&e.key?{label:"",placeholder:"",focus:!1,disabled:!1}:{}}),e.lifecycle,e.template&&"template"!==e.type&&(e.type,e.type="template"),!e.type&&e.fieldGroup&&(e.type="vxform-group"),e.type&&this.vxFormConfig.getMergedField(e),!C(e.defaultValue)&&C(g(e))&&y(t.model,h(e),e.defaultValue),this.initFieldWrappers(e))},e.prototype.initFieldWrappers=function(t){t.wrappers=t.wrappers||[];var e=f({preWrapper:[],postWrapper:[]},t.templateOptions.templateManipulators||{});t.wrappers=d(this.vxFormConfig.templateManipulators.preWrapper.map(function(e){return e(t)}),e.preWrapper.map(function(e){return e(t)}),t.wrappers,this.vxFormConfig.templateManipulators.postWrapper.map(function(e){return e(t)}),e.postWrapper.map(function(e){return e(t)})).filter(function(e,t,o){return e&&t===o.indexOf(e)})},e.prototype.getFieldComponentInstance=function(e){var t=this.vxFormConfig.createComponent(e),o=t?t.instance:{};return{prePopulate:function(){return o.prePopulate&&o.prePopulate(e)},onPopulate:function(){return o.onPopulate&&o.onPopulate(e)},postPopulate:function(){return o.postPopulate&&o.postPopulate(e)}}},e}(),J=function(){function e(){}return e.prototype.initFormFieldProperty=function(e){var t=this;e.forEach(function(e){t.deleteFieldProperty(e)})},e.prototype.initFormFieldConfig=function(e,t){var o=this;e.forEach(function(e){o.setFieldProperty(e,t)})},e.prototype.initFormFieldModel=function(e,o){var r=this;e.forEach(function(t){t.hasOwnProperty("editor")&&(t.typeold=t.type,t.type="text",r.checkFieldDefaultValue(t)&&(o[t.key]=t.defaultValue)),t.hasOwnProperty("fieldArray")&&t.fieldArray.hasOwnProperty("fieldGroup")&&(o[t.key]=[{}],t.fieldArray.fieldGroup.forEach(function(e){e.hasOwnProperty("editor")&&(e.typeold=t.type,e.type="text")})),t.hasOwnProperty("fieldGroup")&&(r.checkFieldDefaultValue(t)||(o[t.key]={}),t.fieldGroup.forEach(function(e){e.hasOwnProperty("editor")&&(e.typeold=e.type,e.type="text",r.checkFieldDefaultValue(o[t.key][e.key])&&(o[t.key][e.key]=e.defaultValue))}))})},e.prototype.initSurveyFormFieldConfig=function(t){var o=this;t.queTotal=0,t.pages&&t.pages.forEach(function(e){o.setFieldNumber(t,e.questions)})},e.prototype.checkFieldDefaultValue=function(e){return e!=undefined&&null!=e&&e.defaultValue!=undefined&&null!=e.defaultValue},e.prototype.deleteFieldProperty=function(e){e.hasOwnProperty("status")&&delete e.status,e.hasOwnProperty("guid")&&delete e.guid,e.hasOwnProperty("id")&&delete e.id,e.hasOwnProperty("wrappers")&&delete e.wrappers,e.hasOwnProperty("_keyPath")&&delete e._keyPath,e.hasOwnProperty("modelOptions")&&delete e.modelOptions,e.hasOwnProperty("checked")&&delete e.checked,e.hasOwnProperty("rownumber")&&delete e.rownumber,e.hasOwnProperty("templateOptions")&&(e.templateOptions.hasOwnProperty("focus")&&delete e.templateOptions.focus,e.templateOptions.hasOwnProperty("disabled")&&delete e.templateOptions.disabled,e.templateOptions.hasOwnProperty("readonly")&&delete e.templateOptions.readonly),e.fieldArray&&e.fieldArray.fieldGroup&&(e.fieldGroup&&delete e.fieldGroup,this.initFormFieldProperty(e.fieldArray.fieldGroup)),e.fieldGroup&&this.initFormFieldProperty(e.fieldGroup)},e.prototype.setFieldProperty=function(t,e){var o=e.filter(function(e){return e.key===t.key});if(o!=undefined&&null!=o&&0<o.length){var r=o[0];r.hasOwnProperty("show")&&(t.show=r.show),r.hasOwnProperty("editor")&&(t.editor=r.editor),r.hasOwnProperty("label")&&null!=r.label&&(t.templateOptions.label=r.label),r.hasOwnProperty("placeholder")&&null!=r.placeholder&&(t.templateOptions.placeholder=r.placeholder),r.hasOwnProperty("options")&&null!=r.options&&(t.templateOptions.options=r.options),r.hasOwnProperty("tips")&&null!=r.tips&&""!=r.tips&&(t.templateOptions.tips=r.tips)}t.fieldArray&&t.fieldArray.fieldGroup&&this.initFormFieldConfig(t.fieldArray.fieldGroup,e),t.fieldGroup&&this.initFormFieldConfig(t.fieldGroup,e)},e.prototype.setFieldNumber=function(t,e){e.forEach(function(e){"line"!=e.type&&"remark"!=e.type&&(t.queTotal=t.queTotal+1,e.templateOptions.queno="Q"+t.queTotal)})},e.decorators=[{type:s.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[]},e.ngInjectableDef=s.ɵɵdefineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}();function U(e){return{types:[{name:"vxform-group",component:$},{name:"template",component:W}],extensions:[{name:"core",extension:new z(e)},{name:"field-validation",extension:new X(e)},{name:"field-form",extension:new B},{name:"field-expression",extension:new L}]}}var Z=function(){function t(t,e){void 0===e&&(e=[]),e&&e.forEach(function(e){return t.addConfig(e)})}return t.forRoot=function(e){return void 0===e&&(e={}),{ngModule:t,providers:[{provide:E,multi:!0,useFactory:U,deps:[w]},{provide:E,useValue:e,multi:!0},{provide:s.ANALYZE_FOR_ENTRY_COMPONENTS,useValue:e,multi:!0},w,_]}},t.forChild=function(e){return void 0===e&&(e={}),{ngModule:t,providers:[{provide:E,useValue:e,multi:!0},{provide:s.ANALYZE_FOR_ENTRY_COMPONENTS,useValue:e,multi:!0},_]}},t.forConfig=function(e){return null!=localStorage.getItem("VX_FORM_LINCES")&&""!=localStorage.getItem("VX_FORM_LINCES")&&localStorage.removeItem("VX_FORM_LINCES"),localStorage.setItem("VX_FORM_LINCES",e),{ngModule:t,providers:[_]}},t.decorators=[{type:s.NgModule,args:[{declarations:[A,I,G,$,q,W],entryComponents:[$,W],exports:[A,I,G,$,q],imports:[r.HttpModule,n.HttpClientModule,o.CommonModule],providers:[J]}]}],t.ctorParameters=function(){return[{type:w},{type:Array,decorators:[{type:s.Optional},{type:s.Inject,args:[E]}]}]},t}();e.VXForm=A,e.VXFormField=I,e.VXFormAttributes=G,e.VXFORM_CONFIG=E,e.VXFormConfig=w,e.VXFormBuilder=_,e.FieldType=R,e.Field=D,e.FieldArrayType=T,e.FieldWrapper=N,e.VXFormModule=Z,e.ɵdefineHiddenProp=P,e.ɵreverseDeepMerge=v,e.clone=k,e.isObject=F,e.Guid=Y,e.VXFormCommonService=J,e.TestBaseUtils=V,e.ɵa=U,e.ɵe=z,e.ɵh=L,e.ɵg=B,e.ɵf=X,e.ɵd=W,e.ɵb=$,e.ɵc=q,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=vx-form-core.umd.min.js.map